@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');

body {
    font-family: 'Inter', sans-serif;
    background-color: #f7f9fb;
    overflow-x: hidden; 
}

/* --- UI CUSTOM --- */
.service-card {
    transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
}
.service-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* --- ANIMACIONES VISTAS --- */
.view-section {
    display: none;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}
.view-section.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* --- SCROLLBAR --- */
.custom-scrollbar::-webkit-scrollbar { width: 6px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }

/* --- UTILIDADES --- */
.normativa-title {
    font-weight: 700;
    display: block;
    margin-bottom: 0.1rem;
}

/* =========================================
   === MODO OSCURO (CORREGIDO) ===
   ========================================= */

body.dark-mode {
    background-color: #121212 !important;
    color: #e5e7eb !important;
}

/* CORRECCIÓN AQUÍ: 
   Añadido '.-z-10' para que SOLO afecte al fondo de pantalla decorativo 
   y NO al Modal de pantalla completa.
*/
body.dark-mode .fixed.inset-0.-z-10 {
    opacity: 0.15 !important;
    filter: invert(1) grayscale(100%) brightness(0.7);
}

/* ASEGURAR MODAL CORRECTO EN MODO OSCURO:
   Forzamos que el modal sea totalmente opaco y sin filtros extraños.
*/
body.dark-mode #zbe-modal {
    background-color: rgba(0, 0, 0, 0.95) !important; /* Fondo negro casi total */
    opacity: 1 !important;     /* Totalmente visible (cuando no tiene la clase hidden) */
    filter: none !important;   /* Sin inversiones de color */
}
/* La imagen dentro del modal no debe invertirse */
body.dark-mode #zbe-modal img {
    filter: none !important;
}

/* 2. Contenedores generales (blancos o grises claros) se vuelven oscuros */
body.dark-mode .bg-white {
    background-color: #1e1e1e !important;
    border-color: #374151 !important;
    color: #e5e7eb !important;
}
body.dark-mode .bg-gray-50,
body.dark-mode .bg-gray-100 {
    background-color: #262626 !important; /* Un poco más claro que el base */
    border-color: #404040 !important;
    color: #d1d5db !important;
}

/* Tarjetas de Servicio (Home) más visibles */
body.dark-mode .service-card {
    background-color: #2d2d2d !important;
    border-color: #4b5563 !important;
}

/* 3. Textos (Gris oscuro -> Gris claro) */
body.dark-mode .text-gray-400,
body.dark-mode .text-gray-500,
body.dark-mode .text-gray-600, 
body.dark-mode .text-gray-700, 
body.dark-mode .text-gray-800, 
body.dark-mode .text-gray-900 {
    color: #d1d5db !important;
}

/* Títulos brillantes */
body.dark-mode .font-bold,
body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4 {
    color: #ffffff !important;
}

/* EXCEPCIÓN IMPORTANTE: Si algo tiene explícitamente text-black (ej: Bus U1 amarillo), mantener negro */
body.dark-mode .text-black {
    color: #000000 !important;
}

/* 4. Textos de colores (Aclararlos para que se lean sobre fondo oscuro) */
body.dark-mode .text-blue-600, body.dark-mode .text-blue-700, body.dark-mode .text-blue-800 { color: #60a5fa !important; }
body.dark-mode .text-red-600, body.dark-mode .text-red-700, body.dark-mode .text-red-800 { color: #f87171 !important; }
body.dark-mode .text-green-600, body.dark-mode .text-green-800 { color: #4ade80 !important; }
body.dark-mode .text-orange-800, body.dark-mode .text-orange-900 { color: #fbbf24 !important; }
body.dark-mode .text-purple-600 { color: #c084fc !important; }

/* 5. CAJAS DE INFORMACIÓN (Alertas suaves) */
body.dark-mode [class*="bg-blue-50"], body.dark-mode [class*="bg-blue-100"] { background-color: rgba(59, 130, 246, 0.15) !important; border-color: rgba(59, 130, 246, 0.3) !important; }
body.dark-mode [class*="bg-red-50"], body.dark-mode [class*="bg-red-100"] { background-color: rgba(239, 68, 68, 0.15) !important; border-color: rgba(239, 68, 68, 0.3) !important; }
body.dark-mode [class*="bg-green-50"], body.dark-mode [class*="bg-green-100"] { background-color: rgba(34, 197, 94, 0.15) !important; border-color: rgba(34, 197, 94, 0.3) !important; }
body.dark-mode [class*="bg-orange-50"], body.dark-mode [class*="bg-orange-100"] { background-color: rgba(249, 115, 22, 0.15) !important; border-color: rgba(249, 115, 22, 0.3) !important; }
body.dark-mode [class*="bg-purple-50"] { background-color: rgba(168, 85, 247, 0.15) !important; border-color: rgba(168, 85, 247, 0.3) !important; }

/* 6. Inputs y Selects */
body.dark-mode input, 
body.dark-mode select {
    background-color: #2d2d2d !important;
    color: #ffffff !important;
    border: 1px solid #4b5563 !important;
}
body.dark-mode input::placeholder {
    color: #9ca3af !important;
}

/* 7. Iconos SVG */
body.dark-mode svg {
    color: currentColor;
}

/* --- LEAFLET DARK MODE FIX --- */
body.dark-mode .leaflet-layer,
body.dark-mode .leaflet-control-zoom-in,
body.dark-mode .leaflet-control-zoom-out,
body.dark-mode .leaflet-control-attribution {
    filter: invert(100%) hue-rotate(180deg) brightness(0.95) contrast(0.9);
}

body.dark-mode .leaflet-marker-icon,
body.dark-mode .leaflet-popup-content-wrapper,
body.dark-mode .leaflet-popup-tip {
    filter: none !important; 
}

body.dark-mode .leaflet-popup-content-wrapper,
body.dark-mode .leaflet-popup-tip {
    background-color: #2d2d2d !important;
    color: #e5e7eb !important;
}
body.dark-mode .leaflet-popup-content b {
    color: #60a5fa !important;
}

/* --- ESTILOS MODAL --- */
/* Cursor para el mapa modal */
#zbe-modal-img {
    cursor: grab;
}
#zbe-modal-img:active {
    cursor: grabbing;
}

/* Forzar que el modal esté por encima de todo */
#zbe-modal {
    backdrop-filter: blur(5px);
}